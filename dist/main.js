(()=>{var e={341:e=>{e.exports=function(){const e=document.querySelector("main"),t=new Map;function n(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function a(){return document.querySelector(".ship-placing")}function r(){return"true"==a().dataset.vertical}function l(e,t){let n=document.querySelectorAll(`[data-x="${e}"]`),a=Array.from(n);for(let e=0;e<a.length;e++)if(a[e].dataset.y==t)return a[e]}return t.set("Carrier",["images/shipCarrierHull.png","images/shipCarrierHullHorizontal.png"]),t.set("Battleship",["images/shipBattleshipHull.png","images/shipBattleshipHullHorizontal.png"]),t.set("Destroyer",["images/shipDestroyerHull.png","images/shipDestroyerHullHorizontal.png"]),t.set("Submarine",["images/shipSubmarineHull.png","images/shipSubmarineHullHorizontal.png"]),t.set("Patrol Boat",["images/shipPatrolHull.png","images/shipPatrolHullHorizontal.png"]),{loadStartScreen:function(t){let n=document.createElement("h2"),a=document.createElement("input"),r=document.createElement("button");n.textContent="Enter Player Name:",a.type="text",a.id="player-name-input",r.id="start-game-button",r.textContent="Start Game",e.appendChild(n),e.appendChild(a),e.appendChild(r),t(r)},fadeIn:function(t){let n=0;e.style.opacity=n;let a=setInterval((()=>{n>=1&&clearInterval(a),n+=.05,e.style.opacity=n}),50)},fadeInLogo:function(){const e=document.querySelector("header");let t=0;e.style.opacity=t;let n=setInterval((()=>{t>=1&&clearInterval(n),t+=.05,e.style.opacity=t}),50)},fadeOut:function(t){let n=1;e.style.opacity=n;let a=setInterval((()=>{n<=0&&(clearInterval(a),t()),n-=.05,e.style.opacity=n}),50)},loadGameScreen:function(t,a){let r=document.querySelector("#player-name-input").value;n(e);let l=document.createElement("div");l.classList.add("game-container");let i=document.createElement("div");i.classList.add("info-container"),l.appendChild(i),e.appendChild(l),function(e){const t=document.querySelector(".game-container");let n=document.createElement("div");n.classList.add("grid");for(let t=10;t>0;t--)for(let a=1;a<11;a++){let r=document.createElement("div");r.classList.add("tile"),r.dataset.x=a,r.dataset.y=t,e(r),n.appendChild(r)}t.appendChild(n)}(a),t(r)},loadShipSelect:function(e,a,r){const l=document.querySelector(".info-container");n(l);let i=document.createElement("h2");i.textContent=`Place your ${a} (drag and drop)`;let c=document.createElement("div");c.classList.add("ship-row");let o=document.createElement("button");o.textContent="Change Axis",o.classList.add("axis-button");let s=document.createElement("img");s.src=t.get(a)[0],s.draggable="true",s.classList.add("ship-placing"),s.dataset.vertical="true",s.dataset.length=r,s.dataset.name=a,c.appendChild(s),c.appendChild(o),l.appendChild(i),l.appendChild(c),e(s,o)},getCurrentShip:a,placementIsVertical:r,getTile:l,placeShipOnGrid:function(e,t,n){let r=new Image;r.src=a().src;let i=l(e,t);n?r.classList.add("centered-ship-vertical"):r.classList.add("centered-ship-horizontal"),i.appendChild(r)},changeAxis:function(){let e=a();r()?(e.dataset.vertical="false",e.src=t.get(e.dataset.name)[1]):(e.dataset.vertical="true",e.src=t.get(e.dataset.name)[0])}}}},529:(e,t,n)=>{const a=n(922);e.exports=function(){const e=[];function t(t,r,l,i){return!!n(t,r,l,i)&&(e.push(a(t,r,l,i)),!0)}function n(e,t,n,a){if(a){if(Number(e)+Number(n)>11)return!1;for(let a=n;a<e+n;a++)if(!r(t,a))return!1}else{if(Number(e)+Number(t)>11)return!1;for(let a=t;a<e+t;a++)if(!r(a,n))return!1}return!0}function r(t,n){for(let a=0;a<e.length;a++)if(!e[a].checkAvailable(t,n))return!1;return!0}return{placeShip:t,receiveAttack:function(t,n){let a=!1;for(let r=0;r<e.length;r++)if(e[r].hit(t,n)){a=!0;break}return a},allSunk:function(){for(let t=0;t<e.length;t++)if(!e[t].isSunk())return!1;return!0},checkAvailable:r,placeShip:t,checkPlaceable:n}}},874:(e,t,n)=>{const a=n(529);e.exports=function(e){const t=a(),n=[];return{getName:function(){return e},attemptPlaceShip:function(e,n,a,r){return t.placeShip(e,n,a,r)},checkIfAttackable:function(e,t){return!n.find((n=>n[0]===e&&cords[1]===t))},attemptReceiveAttack:function(e,a){return n.push([e,a]),t.receiveAttack(e,a)},checkPlaceable:function(e,n,a,r){return t.checkPlaceable(e,n,a,r)}}}},922:e=>{e.exports=function(e,t,n,a){const r=[];if(console.log({length:e,startPosX:t,startPosY:n}),a)for(let a=n;a<n+e;a++)r.push({x:t,y:a,isHit:!1});else for(let a=t;a<t+e;a++)r.push({x:a,y:n,isHit:!1});return{hit:function(e,t){const n=r.find((n=>n.x===e&&n.y===t));return null!=n&&(n.isHit=!0,!0)},isSunk:function(){let e=!0;return r.forEach((t=>{!1===t.isHit&&(e=!1)})),e},checkAvailable:function(e,t){return null==r.find((n=>n.x===e&&n.y===t))}}}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,n),l.exports}(()=>{const e=n(874);let t=n(341)(),a=null,r=null,l=[{name:"Carrier",length:5},{name:"Battleship",length:4},{name:"Destroyer",length:3},{name:"Submarine",length:3},{name:"Patrol Boat",length:2}],i=-1;function c(){t.loadGameScreen(o,x),t.fadeIn()}function o(t){a=e(t),r=e("Computer"),s()}function s(){i++,i>=l.length?console.log("All ships placed"):t.loadShipSelect(C,l[i].name,l[i].length)}function u(){t.fadeOut(c)}function d(e){}function p(e){e.target.style.opacity=0,e.dataTransfer.effectAllowed="move";let n=new Image;n.src=t.getCurrentShip().src,t.placementIsVertical()?e.dataTransfer.setDragImage(n,n.width/2,n.height-20):e.dataTransfer.setDragImage(n,20,n.height/2)}function f(e){e.target.style.opacity=1}function m(e){}function h(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}function g(e){let n=Number(e.target.dataset.x),r=Number(e.target.dataset.y);e.target.style.background="inherit";let l=Number(t.getCurrentShip().dataset.length);a.checkPlaceable(l,n,r,t.placementIsVertical())&&(t.placeShipOnGrid(n,r,t.placementIsVertical()),a.attemptPlaceShip(l,n,r,t.placementIsVertical()),s())}function y(e){let n=Number(e.target.dataset.x),r=Number(e.target.dataset.y),l=Number(t.getCurrentShip().dataset.length);a.checkPlaceable(l,n,r,t.placementIsVertical())?e.target.style.background="green":e.target.style.background="red"}function v(e){e.target.style.background="inherit"}function S(){t.changeAxis(),console.log("Axis button pressed")}function b(e){e.addEventListener("click",u)}function C(e,t){e.addEventListener("dragstart",p),e.addEventListener("drag",d),e.addEventListener("dragend",f),e.addEventListener("dragover",m),t.addEventListener("click",S)}function x(e){e.addEventListener("dragover",h),e.addEventListener("drop",g),e.addEventListener("dragenter",y),e.addEventListener("dragleave",v)}setTimeout((function(){t.loadStartScreen(b),t.fadeIn()}),300),setTimeout(t.fadeInLogo,300)})()})();